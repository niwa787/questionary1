<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>使用者介面</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<style>
		@import url(http://fonts.googleapis.com/earlyaccess/cwtexyen.css);
		
		*{
			font-family: "Lora",serif;
		    font-size: 18px;
		}
		.abc{
		font-weight: bold;
		}
	
          .table {
            width: calc(100% + 400px);
			margin-left: -200px;
			font-family: 'Oswald', sans-serif;
  			border-collapse:collapse;
        }
        .wrap{
		  overflow:hidden;
		  border-radius:10px 10px 0px 0px;
		  box-shadow: 0 0 20px rgba(0, 0, 0, 0.35);
		}
		
		
		
		th{
		  background-color:#009879;
		  color:#ffffff;
		  width:25vw;
		  height:75px;
		  text-align:center;
		}
		
		td{
		  background-color:#ffffff;
		  width:25vw;
		  height:50px;
		  text-align:center;
		  
		}
		
		tr{
		  border-bottom: 1px solid #dddddd;
		}
		
		tr:last-of-type{
		  border-bottom: 2px solid #009879;
		}
		
		tr:nth-of-type(even) td{
		  background-color:#f3f3f3;
		}
    </style>


</head>
<body>
    <div class="container">
        <h1 class="text-center my-4 abc">KoreaStar問卷列表</h1>

        <form class="d-flex mb-4" action="#" method="get">
            <input class="form-control me-2" type="search" name="keyword" placeholder="Search" aria-label="Search" th:value="${keyword}">
            <input type="hidden" name="page" th:value="${currentPage}">
            <input type="hidden" name="size" th:value="${pageSize}">
            <input type="hidden" name="sortField" th:value="${sortField}">
            <input type="hidden" name="sortDir" th:value="${sortDir}">
            <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
		<div class="d-flex mb-3">
            
            <a class="btn btn-secondary me-2" href="/">返回</a>
        </div>
        
        <table class="table">
            <thead>
                <tr>
                    <th>
                        <a th:href="@{/user(page=${currentPage}, size=${pageSize}, sortField='id', sortDir=${reverseSortDir}, keyword=${keyword})}">
                            順序 <span th:text="${sortField == 'id' ? (sortDir == 'asc' ? '▲' : '▼') : ''}"></span>
                        </a>
                    </th>
                    <th>
                        <a th:href="@{/user(page=${currentPage}, size=${pageSize}, sortField='name', sortDir=${reverseSortDir}, keyword=${keyword})}">
                            題目 <span th:text="${sortField == 'name' ? (sortDir == 'asc' ? '▲' : '▼') : ''}"></span>
                        </a>
                    </th>
                    <th>
                        <a th:href="@{/user(page=${currentPage}, size=${pageSize}, sortField='category', sortDir=${reverseSortDir}, keyword=${keyword})}">
                            題目類型 <span th:text="${sortField == 'category' ? (sortDir == 'asc' ? '▲' : '▼') : ''}"></span>
                        </a>
                    </th>
                    <th>
                        <a th:href="@{/user(page=${currentPage}, size=${pageSize}, sortField='brand', sortDir=${reverseSortDir}, keyword=${keyword})}">
                            選項描述<span th:text="${sortField == 'brand' ? (sortDir == 'asc' ? '▲' : '▼') : ''}"></span>
                        </a>
                    </th>

                    <th>照片</th>
                      <th>
                        <a th:href="@{/user(page=${currentPage}, size=${pageSize}, sortField='createdAt', sortDir=${reverseSortDir}, keyword=${keyword})}">
                            截止日期 <span th:text="${sortField == 'createdAt' ? (sortDir == 'asc' ? '▲' : '▼') : ''}"></span>
                        </a>
                    </th>
                    <th>
                        <a th:href="@{/user(page=${currentPage}, size=${pageSize}, sortField='updateTime', sortDir=${reverseSortDir}, keyword=${keyword})}">
                            更新時間 <span th:text="${sortField == 'updateTime' ? (sortDir == 'asc' ? '▲' : '▼') : ''}"></span>
                        </a>
                    </th>
                    <th>
                        <a th:href="@{/user(page=${currentPage}, size=${pageSize}, sortField='status', sortDir=${reverseSortDir}, keyword=${keyword})}">
                            狀態 <span th:text="${sortField == 'status' ? (sortDir == 'asc' ? '▲' : '▼') : ''}"></span>
                        </a>
                    </th>
                    <th>功能</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="product : ${productPage.content}">
                    <td th:text="${product.id}"></td>
                    <td th:text="${product.name}"></td>
                    <td th:text="${product.category}"></td>
                    <td th:text="${product.brand}"></td>
                    
                    <td>
                        <img th:src="@{'/images/' + ${product.imageFileName}}" alt="..." width="100">
                    </td>
                    <td th:text="${product.createdAt.toString().substring(0, 10)}"></td>
                     <td th:text="${product.updateTime != null ? #strings.substring(product.updateTime.toString(), 0, 10) : ''}"></td>
                    <td th:text="${product.status != null ? product.status : ''}"></td>
                    <td style="white-space:nowrap">
						<div th:classappend="${product.status.toString() == '已結束' || product.status.toString() == '未開放'} ? 'disabled-overlay' : ''">
												      <a class="btn btn-primary btn-sm" th:href="@{/products/edit(id=${product.id})}" th:classappend="${product.status.toString() == '已結束'|| product.status.toString() == '未開放'} ? 'disabled'">作答</a>
													  </div>
                        
                        <a class="btn btn-warning btn-sm" th:href="@{/user/stats(id=${product.id})}">統計</a>
                    </td>
                </tr>
            </tbody>
        </table>

        <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
                <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                    <a class="page-link" th:href="@{/user(page=${currentPage - 1}, size=${pageSize}, sortField=${sortField}, sortDir=${sortDir}, keyword=${keyword})}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
                <li class="page-item" th:each="i : ${#numbers.sequence(0, totalPages - 1)}" th:classappend="${i == currentPage} ? 'active'">
                    <a class="page-link" th:href="@{/user(page=${i}, size=${pageSize}, sortField=${sortField}, sortDir=${sortDir}, keyword=${keyword})}" th:text="${i + 1}">1</a>
                </li>
                <li class="page-item" th:classappend="${currentPage + 1 == totalPages} ? 'disabled'">
                    <a class="page-link" th:href="@{/user(page=${currentPage + 1}, size=${pageSize}, sortField=${sortField}, sortDir=${sortDir}, keyword=${keyword})}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OG"></script>
</body>
</html>
